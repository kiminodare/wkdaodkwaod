"use strict";var inst,validationAutoLoaded=!1;loadjs([generatorUrl+"generator-assets/stylesheets/generator.css",adminUrl+"assets/stylesheets/fa-svg-with-js.min.css",generatorUrl+"generator-assets/lib/remodal/remodal.css",generatorUrl+"generator-assets/lib/remodal/remodal-default-theme.css",adminUrl+"assets/stylesheets/qtip.min.css",adminUrl+"assets/stylesheets/ripple.min.css"]),loadjs([adminUrl+"assets/javascripts/jquery-3.2.1.min.js",adminUrl+"assets/javascripts/popper.min.js",adminUrl+"assets/javascripts/bootstrap.min.js",adminUrl+"assets/javascripts/plugins/pace.min.js"],"core",{async:!1}),loadjs.ready("core",function(){loadjs([adminUrl+"assets/javascripts/plugins/ripple.min.js"],"bundleA"),loadjs([adminUrl+"assets/javascripts/plugins/jquery.qtip.min.js"],"bundleB"),loadjs([generatorUrl+"generator-assets/lib/remodal/remodal.min.js"],"bundleC"),loadjs([adminUrl+"assets/javascripts/fontawesome-all.min.js"]);var e=$('input[name="action"]'),t=e.val();"undefined"==t&&(t="build_read",e.val(t)),$('#form-select-table select[name="table"]').on("change",function(){$('input[name="table-to-reset"]').val($(this).val()),$('button[name="btn-reset-table"]').find("em").text($(this).val())}),$('input[name="list_type"]').on("change",function(e){!0===$('input[value="build_paginated_list"]').prop("checked")?($('div[data-show-values="build_paginated_list"]').removeClass("off").addClass("on"),$('div[data-show-values="build_single_element_list"]').removeClass("on").addClass("off")):!0===$('input[value="build_single_element_list"]').prop("checked")&&($('div[data-show-values="build_paginated_list"]').removeClass("on").addClass("off"),$('div[data-show-values="build_single_element_list"]').removeClass("off").addClass("on"))}),$('input[value="build_read"]').trigger("change"),$("#reload-db-structure-link").on("click",function(){$.ajax({url:generatorUrl+"inc/reload-db-structure.php",type:"GET"}).done(function(e){location.reload()})}),$('button[name="form-select-fields-submit-btn"]').on("click",function(e){e.preventDefault();var t=$("#form-select-fields");$.when(t.find(".hidden-wrapper.off").remove()).then(function(){t.submit()})}),$('input[name^="rp_others_"]').on("change",function(e){var t=$(this).closest("div.form-group").siblings(".skippable");"skip"===$(this).val()?t.slideUp():t.slideDown()}),$('input[name^="rp_others_"]:checked').trigger("change"),$(".card-header .close").on("click",function(){$(this).closest(".card").remove()}),$('select[name^="rp_value_type_"]').on("change",function(){var e=$(this).val(),t=$(this).closest(".form-group");"array"==e||"image"==e||"file"==e||"password"==e?t.find('select[name^="rp_jedit_"]').val("").trigger("change").attr("disabled",!0).closest("label").addClass("disabled"):t.find('select[name^="rp_jedit_"]').removeAttr("disabled").closest("label").removeClass("disabled")}),$('select[name^="rp_value_type_"]').trigger("change"),$('select[name^="cu_field_type_"]').on("change",function(){var e,t=$(this).val(),a=$(this).closest(".form-group").parent('div[class^="col-"]'),i=a.find('select[name^="cu_field_width_"]');"textarea"!=t?a.find(".tinymce").prop("checked",!1).attr("disabled",!0).closest("label").addClass("disabled"):a.find(".tinymce").removeAttr("disabled").closest("label").removeClass("disabled"),"image"==t?$(this).closest(".form-group").find(".cu_special_image_wrapper").show():$(this).closest(".form-group").find(".cu_special_image_wrapper").hide(),"date"==t||"datetime"==t||"time"==t||"month"==t?("date"==t||"datetime"==t||"month"==t?("date"==t||"datetime"==t?e="dddd mmmm yyyy":"month"==t&&(e="mmmm"),a.find(".cu_special_date_wrapper").find('label[for^="cu_special_date_"]').show(),a.find(".cu_special_date_wrapper").find('input[name^="cu_special_date_"]').attr("placeholder",e).parent('div[class^="col-"]').show()):(a.find(".cu_special_date_wrapper").find('label[for^="cu_special_date_"]').hide(),a.find(".cu_special_date_wrapper").find('input[name^="cu_special_date_"]').parent('div[class^="col-"]').hide()),"datetime"==t||"time"==t?(a.find(".cu_special_date_wrapper").find('label[for^="cu_special_time_"]').show(),a.find(".cu_special_date_wrapper").find('input[name^="cu_special_time_"]').attr("placeholder","H:i a").parent('div[class^="col-"]').show()):(a.find(".cu_special_date_wrapper").find('label[for^="cu_special_time_"]').hide(),a.find(".cu_special_date_wrapper").find('input[name^="cu_special_time_"]').parent('div[class^="col-"]').hide()),a.find(".cu_special_date_wrapper").show()):a.find(".cu_special_date_wrapper").hide(),"password"==t?a.find(".cu_special_password_wrapper").show():a.find(".cu_special_password_wrapper").hide(),"input"==t||"textarea"==t?a.find(".char-count").removeAttr("disabled").closest("label").removeClass("disabled"):a.find(".char-count").prop("checked",!1).attr("disabled",!0).closest("label").addClass("disabled"),"datetime"==t?i.find('option[value^="33%"]').attr("disabled",!0):i.find('option[value^="33%"]').removeAttr("disabled")});var a=$('[id^="validation-custom-ajax-elements-container-"]'),o=function(){$('select[name^="cu_validation_function_"]').on("change",function(){var e=$(this).attr("data-index"),t=$(this).attr("data-column-name"),a=$("#ajax-update-validation-helper");$.ajax({url:generatorUrl+"inc/update-validation-helper.php",data:{columnName:t,index:e,value:$(this).val()}}).done(function(e){a.html(e);var t=window.go;setTimeout(t,0)}).fail(function(e,t,a){console.log(a)})})};o();var s=function(e,t,a){var i,n,l=parseInt($(t).attr("data-index")),o=parseInt(a.val());if(e.find(".validation-dynamic")[l])for(;0<e.find($(".validation-dynamic")[l]).length;)void 0,i=e.find('.validation-dynamic[data-index="'+l+'"]'),n=$(i).find("input, textarea, select, radio, checkbox"),$(n).each(function(e,t){var a="",i="",n=$(t).attr("id").replace("-"+parseInt(l),"-"+parseInt(l+1));a=$("#"+n),$(t).is("select")?(i=a.val(),$(t).val(i).trigger("change")):(i=a.val(),$(t).val(i))}),l++;o-=1,a.val(o),e.find(".validation-remove-element-button:last").closest(".validation-dynamic").remove()};if($(a).each(function(e,t){var a,i=$(this),n=$(this).attr("id").replace("validation-custom-ajax-elements-container-",""),l=$('input[name="validation-dynamic-fields-index-'+n+'"]');$(this).siblings().find(".validation-add-element-button").on("click",function(){a=parseInt(l.val()),a++,l.val(a),$.ajax({url:generatorUrl+"inc/validation-custom-dynamic-elements.php",data:{columnName:n,index:a}}).done(function(e){i.append(e);var t=window.run;void 0!==t&&setTimeout(t,0),o(),i.find(".validation-remove-element-button").removeClass("hidden").off("click").on("click",function(){s(i,this,l)})}).fail(function(e,t,a){console.log(a)})}),$(this).find(".validation-remove-element-button").on("click",function(){s(i,this,l)})}),$("#debug")[0]){var i=$("#debug"),n=$("#debug").outerWidth();$("#btn-debug").on("click",function(){i.hasClass("on")?i.removeClass("on").animate({left:$(window).outerWidth()},200):i.addClass("on").animate({left:$(window).outerWidth()-n},200)})}$("#lock-admin-link")[0]&&$("#lock-admin-link").on("click",function(e){return e.preventDefault(),$("form#lock-unlock-admin").submit(),!1});var l=$('select[name^="cu_field_type_"], select[name^="cu_special_password_"]');l.on("change",function(e){if($("body").hasClass("dependent-fields-loaded")){$(e.target).attr("data-index");var t=$(e.target).attr("id").replace("cu_field_type_","").replace("cu_special_password_",""),a=$('div[id="validation-auto-ajax-elements-container-'+t+'"]'),i=$('select[name="cu_field_type_'+t+'"]').val(),n=$('select[name^="cu_special_password_'+t+'"]').val();$.ajax({url:generatorUrl+"inc/validation-auto-ajax-elements.php",async:!0,data:{columnName:t,fieldType:i,passwordValue:n}}).done(function(e){a.html(e)}).fail(function(){console.log("error")})}});var d=function(){$("body").hasClass("dependent-fields-loaded")?(l.each(function(){var e=$(this).attr("name").replace("cu_field_type_","cu_validation_type_");$('input[name="'+e+'"]')[0]&&"auto"==$('input[name="'+e+'"]:checked').val()&&$(this).trigger("change")}),validationAutoLoaded=!0):setTimeout(d,600)};$(".choose-action-radio").on("click",function(){return t=$(this).attr("id"),e.val(t).trigger("change"),$(".choose-action-radio.active").removeClass("bg-pink-500 active").addClass("bg-dark"),$("#"+t).removeClass("bg-dark").addClass("bg-pink-500 active"),"build_create_edit"==t&&!1===validationAutoLoaded&&d(),!1}),$("#"+t).trigger("click")}),loadjs.ready(["core","bundleA"],function(){$(".legitRipple").ripple()}),loadjs.ready(["core","bundleB"],function(){$("[data-tooltip]").each(function(){var e={style:"qtip-dark",title:""};$(this).is("input")?(e.showEvent="focus",e.hideEvent="unfocus"):(e.showEvent="mouseenter",e.hideEvent="mouseleave");var a=e;for(var t in e)void 0!==$(this).data(t)?a[t]=$(this).data(t):a[t]=e[t];if(a.position={my:"bottom center",at:"top center",adjust:{x:0,y:0}},void 0!==$(this).data("position")){var i=$(this).data("position");"right"==i?a.position={my:"left center",at:"right center"}:"bottom"==i?a.position={my:"top center",at:"bottom center"}:"left"==i&&(a.position={my:"right center",at:"left center"})}if(void 0!==$(this).data("adjust-x")){var n=$(this).data("adjust-x");a.position.adjust.x=n}if(void 0!==$(this).data("adjust-y")){var l=$(this).data("adjust-y");a.position.adjust.y=l}a.maxWidth={},void 0!==$(this).data("max-width")&&(a.maxWidth=$(this).data("max-width")),a.maxHeight={},void 0!==$(this).data("max-height")&&(a.maxHeight=$(this).data("max-height"));var o=$(this).data("tooltip");try{a.content=$(o).html()}catch(e){}void 0===a.content&&(a.content={title:a.title,attr:"data-tooltip"}),$(this).qtip({content:a.content,position:a.position,show:{event:a.showEvent,effect:function(e){$(this).fadeIn(200)}},hide:{event:a.hideEvent,delay:500,effect:function(e){$(this).fadeOut(200)}},style:{classes:a.style},events:{show:function(e,t){$(this).css({"max-width":a.maxWidth,"max-height":a.maxHeight})}}})})}),loadjs.ready(["core","bundleC"],function(){$('div[data-remodal-id="modal"]')[0]&&(inst=$('div[data-remodal-id="modal"]').remodal()),$('button[name^="rp_jedit_select_modal"], button[name^="cu_select_modal"]').on("click",function(){var d=$(this).attr("data-column"),r=$(this).attr("data-origin");$.ajax({url:generatorUrl+"inc/select-values.php",type:"GET",data:{column:d,action:"select-table"}}).done(function(e){$("#remodal-content").html(e).find(".select2").select2(),inst.open(),$(document).off("confirmation").on("confirmation",".remodal",function(){var e=$('input[name="select-from-'+d+'"]:checked').val(),t="",a="",i="",n="",l="",o="",s=$('input[name="select_multiple-'+d+'"]:checked').val();"from_table"==e?(t=$('select[name="table-'+d+'"]').val(),a=$('select[name="value-'+d+'"]').val(),i=$('select[name="field-1-'+d+'"]').val(),n=$('select[name="field-2-'+d+'"]').val()):"custom_values"==e&&(l=$('input[name^="custom_name-"]').serializeArray(),o=$('input[name^="custom_value-"]').serializeArray()),$.ajax({url:generatorUrl+"inc/register-select-values.php",type:"POST",data:{column:d,origin:r,select_from:e,select_from_table:t,select_from_value:a,select_from_field_1:i,select_from_field_2:n,select_custom_names:l,select_custom_values:o,select_multiple:s}}).done(function(e){"rp_jedit"==r?$("#rp_select-values-"+d).html(e):"create-edit"==r&&$("#cu_select-values-"+d).html(e)}).fail(function(){console.log("error")})})}).fail(function(e,t,a){console.log(a)})});var a=$("#filters-ajax-elements-container"),i=$('input[name="filters-dynamic-fields-index"]'),n=parseInt(i.val()),l=function(){$(".filters-remove-element-button").removeClass("hidden").off("click").on("click",function(){var e,t,o=parseInt($(this).attr("data-index"));if($(".filters-dynamic")[o])for(;0<$($(".filters-dynamic")[o]).length;)void 0,e=$('.filters-dynamic[data-index="'+o+'"]'),t=$(e).find("input, textarea, select, radio, checkbox"),$(t).each(function(e,t){if(void 0===$(t).attr("data-activates")){var a="",i="";if($(t).is('input[type="radio"]')){var n=$(t).attr("name").replace("-"+parseInt(o),"-"+parseInt(o+1));i=(a=$('input[name="'+n+'"]:checked')).val(),$(t).val()==i?$(t).prop("checked",!0):$(t).prop("checked",!1)}else{var l=$(t).attr("id").replace("-"+parseInt(o),"-"+parseInt(o+1));a=$("#"+l),i=$(t).is("select")?a.find("option:selected").val():a.val(),$(t).val(i)}}}),o++;n-=1,i.val(n),$(".filters-remove-element-button:last").closest(".filters-dynamic").remove()})};$(".filters-add-element-button").on("click",function(){n++,i.val(n),$.ajax({url:generatorUrl+"inc/filters-dynamic-elements.php",data:{index:n}}).done(function(e){a.append(e);var t=window.run;void 0!==t&&setTimeout(t,0),$(".filters-dynamic .hidden-wrapper").dependentFields(),$(".filters-dynamic").niceCheck(),$(".filters-dynamic select").select2(),l(),o()}).fail(function(e,t,a){console.log(a)})}),l();var o=function(){$('button[name^="filter_test-"]')[0]&&$('button[name^="filter_test-"]').off("click").on("click",function(){var e=$(this).val(),t={},a="test_filter_"+e;t[a]="all",$('select[name="test_filter_'+e+'"]')[0]&&(t[a]=$('select[name="test_filter_'+e+'"]').val()),t.index=e,t.filter_mode=$('input[name="filter-mode-'+e+'"]:checked').val(),t.filter_A=$('select[name="filter_field_A-'+e+'"]').val(),t.select_label=$('input[name="filter_select_label-'+e+'"]').val(),t.option_text=$('input[name="filter_option_text-'+e+'"]').val(),t.fields=$('input[name="filter_fields-'+e+'"]').val(),t.field_to_filter=$('input[name="filter_field_to_filter-'+e+'"]').val(),t.from=$('input[name="filter_from-'+e+'"]').val(),t.type=$('input[name="filter_type-'+e+'"]').val(),$.ajax({url:generatorUrl+"inc/filter-test.php",type:"POST",data:t}).done(function(e){$("#remodal-content").html(e),$('button[data-remodal-action="cancel"]').css({position:"absolute",left:"-100000px"}),inst.open(),$('#remodal-content button[name="cancel_filters"]').attr("disabled",!0),$('#remodal-content button[name="submit_filters"]').attr("disabled",!0),$(document).on("confirmation",".remodal",function(){$('button[data-remodal-action="cancel"]').css("display","inline-block")})}).fail(function(e,t,a){console.log(a)})})};o(),$('button[name="btn-reset-table"]')&&$('button[name="btn-reset-table"]').on("click",function(e){return e.preventDefault(),$.ajax({url:generatorUrl+"inc/reset-table-form.php",type:"POST",data:{table:$('input[name="table-to-reset"]').val()}}).done(function(e){$("#remodal-content").html(e),$("#remodal-content").niceCheck(),inst.open(),$('input[name="reset-data-choices"]').on("click",function(){$('input[name="reset-data"]').val($('input[name="reset-data-choices"]:checked').val())}),$(document).on("confirmation",".remodal",function(){$("#form_reset_table").submit()})}).fail(function(e,t,a){console.log(a)}),!1}),$("#remove-authentification-module")[0]&&$("#remove-authentification-module").on("click",function(e){e.preventDefault(),$.ajax({url:generatorUrl+"inc/remove-authentification-module.php",type:"GET",data:{}}).done(function(e){$("#remodal-content").html(e),$("#form-remove-authentification-module").niceCheck(),inst.open(),$(document).off("confirmation").on("confirmation",".remodal",function(){$("#form-remove-authentification-module").submit()})}).fail(function(e,t,a){console.log(a)})})});